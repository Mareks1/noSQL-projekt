<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta name="generator" content="pandoc"/>
  <title>Technologie NoSQL</title>
  <link rel="stylesheet" href="../style/style.css">
</head>
<body>
	<div class = "return">
		<a href="../index.html">powrót</a>
	</div>
	<div class = "description">
		<h1 class="text-center">Zadanie GEO</h1>
		</br>
		<p class="description-team">
			To zadanie zostało wykonane przez - Marek Białousz.
			</br>
			Przedstawiono
			</br>
			Zadania geodezyjne w bazach danych 
			<i>posgreSQL</i> oraz <i>elasticsearch</i>.
			</br>
			Czas wykonania oraz ilość zużytych zasobów.
			</br>
			Opis danych oraz instrukcja.
			</br>
		</p>
		<div class="menu">
			<ul>
				<li><a href="#iod">Informacje o danych</a></li>
				<li><a href="#iiko">Instalacja i konfiguracja oprogramowania</a></li>
				<ul>
					<li><a href="#iiko1">postgreSQL</a></li>
					<li><a href="#iiko2">jdk</a></li>
					<li><a href="#iiko3">jq</a></li>
					<li><a href="#iiko4">python</a></li>
				</ul>
				<li><a href="#psql">PostgreSQL</a></li>
				<ul>
					<li><a href="#psql1">utworzenie tabeli</a></li>
					<li><a href="#psql2">import danych</a></li>
					<li><a href="#psql3">przykładowy rekord</a></li>
					<li><a href="#psql4">zapytania geodezyjne</a></li>
				</ul>
				<li><a href="#es">Elasticsearch</a></li>
				<ul>
					<li><a href="#es1">przekształcenie danych</a></li>
					<li><a href="#es2">import danych</a></li>
					<li><a href="#es3">przykładowy rekord</a></li>
					<li><a href="#es4">zapytania geodezyjne (mapki)</a></li>
				</ul>
			</ul>
		</div>
		<h2 id="iod">Informacje o danych</h2>	
		<p class="description-data">
			Plik zawiera najnowsze dane (luty 2017) Krajowych Statystyk wyszukiwania kodu pocztowego dla Wielkiej Brytanii.
		</br>
			<a href="https://data.gov.uk/dataset/national-statistics-postcode-lookup-latest-centroids" target="_blank">National Statistics Postcode Lookup (Latest) Centroids</a>
		</br>
			Rozmiar: > 902 MB
		</br>
			Ilość: 2593613
		</p>
		</br>	
		<h2 id="iiko">Instalacja i konfiguracja oprogramowania</h2>
		<h3 id="iiko1">postgreSQL</h3>
		<p>
			Baza, na której odbywały się badania - postrgeSQL.
		</br>
			Link do pobrania - <a href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads" target="_blank">TUTAJ</a>.
		</p>
		<h3 id="iiko2">jdk</h3>
		<p>
			Do badań na bazie elasticsearch potrzebny jest jdk.
		</br>
			Link do pobrania - <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank">TUTAJ</a>.
		</br>
			Konfiguracja zmiennych środowiskowych:
		</br>
			<div class="text-center">
				<i>Panel sterowania -> System -> Zmień ustawienia -> Zaawansowane (zakładka) -> Zmienne środowiskowe...</i>
			</div>
			</br>
			W <i>zmienne systemowe</i> szukamy zmiennej <i>JAVA_HOME</i> oraz sprawdzamy czy ścieżka
			jest ustawiona na zainstalowany przez z nas <i>jdk</i>.
			</br>
			Jeśli nie, zaznaczamy zmienną, klikamy <i>Edytuj...</i> oraz zmieniamy ścieżkę i ponownie uruchamiamy komputer.
		</p>
		<h3 id="iiko3">jq</h3>
		<p>
			W pracy konieczne będzie przekształcenie danych . Konieczna jest instalacja frameworka Chocolatey oraz narzędzia jq.
		</br>
			Polecenia w cdm (tryb administratora):
			<div class="command">
				<code>
@powershell -NoProfile -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))" && SET "PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin"
				</code>
			</div>
			Następnie:
			<div class="command">
				<code>
chocolatey install jq
				</code>
			</div>
		</p>
		<h3 id="iiko4">python</h3>
		<p>
			Python będzie potrzebny do uruchomienia skryptów.
		</br>
			Link do pobrania - <a href="https://www.python.org/downloads/windows/" target="_blank">TUTAJ</a>.
		</p>
		</br>
		<h2 id="psql">PostgreSQL</h2>
		<h3 id="psql1">utworzenie tabeli</h3>
		<p>
			Aby uruchomić serwer, trzeba przejść do pliku binarnego posgreSQL'a, polecenie w konsoli cmd:
			<div class="command">
				<code>
cd [ścieżka gdzie jest zainstalowany postgreSQL]\PostgreSQL\9.6\bin
				</code>
			</div>
			Logowanie jako domyślnie utworzony użytkownik <i>postgres</i> polecenie:
			<div class="command">
				<code>
psql -U postgres
				</code>
			</div>
			oraz podajemy hasło które ustawiliśmy przy instalacji postgreSQL'a.
		</br>
		</p>	
		<h3 id="psql2">import danych</h3>
		<p>
			1. Pobrać dane - <a href="geoportal.statistics.gov.uk/datasets/055c2d8135ca4297a85d624bb68aefdb_0.csv">LINK</a> dane.
		</br></br>
			2. Pobrać skrypt - <a href="../../scripts/s1.py" download>LINK</a>
		</br>
			Skrypt trzeba umieścić w folderze z danymi. Jest on potrzebny, ponieważ usunie znaki nie kodowane w <i>windows-1250</i> w cmd.
		</br>
			<div class="command">
				<code>
py s1.py
				</code>
			</div>
			3. Pobrać <i>pgfutter</i>, oraz zamień nazwę pobranego pliku na pgfutter.exe.
			Następnie zaimportować dane do postreSQL'a (wszystkie pliki w tym samym katalogu): 
			<div class="command">
				<code>
pgfutter --pass "[hasło]" --table "test" csv map.csv
				</code>
			</div>
		</br>
		</p>
		<h3 id="psql3">przykładowy rekord</h3>
		<p>
			TODO
		</p>
		<p>
			TODO
		</p>
		<h3 id="psql4">zapytania geodezyjne</h3>
		<p>
			TODO
		</p>
		<h2 id="es">Elasticsearch</h2>
		<h3 id="es1">przekształcenie danych</h3>			
		<p>
			TODO
		</p>
		</br>
		<h3 id="es2">import danych</h3>
		<p>
			TODO
		</p>
		<h3 id="es3">przykładowy rekord</h3>
		<p>
			TODO
		</p>
			TODO
		</p>
		<h3 id="es4">polecenia geodezyjne (mapki)</h3>
			TODO
		</p>
	</div>
	</br>
	<div class = "return">
		<a href="../index.html">powrót</a>
	</div>
</body> 
